# ruff.toml (é’ˆå¯¹ Ruff 0.12.12 ä¼˜åŒ–)

#========================
#ğŸ§©æ ¸å¿ƒé…ç½®
#========================
line-length = 200  # å¢åŠ è¡Œé•¿åº¦è‡³200å­—ç¬¦ï¼Œå…è®¸æ›´é•¿çš„å•è¡Œ
target-version = "py313"
indent-width = 4
cache-dir = "~/.cache/"
# é’ˆå¯¹ Ruff 0.12.x çš„æ–°é…ç½®é€‰é¡¹
preview = true  # å¯ç”¨é¢„è§ˆåŠŸèƒ½ï¼Œå¯èƒ½åŒ…å«æ›´å¥½çš„å•è¡Œæ ¼å¼åŒ–

#========================
#ğŸ“æ–‡ä»¶æ’é™¤è§„åˆ™
#========================
exclude = [
    ".venv", "__pycache__", "build", "dist",
    "migrations", "node_modules", "tests/fixtures",
    "**/generated/*.py"  # ç”Ÿæˆä»£ç 
]
extend-exclude = ["old_code/**"]

#========================
#âš™ï¸è§„åˆ™é…ç½®(lint)
#========================
[lint]
# ç¡®ä¿ä¸ç¦æ­¢å•è¡Œç®€å•è¯­å¥çš„è§„åˆ™è¢«å¯ç”¨
extend-select = [
    "B",    # bugbear - éå¸¸é‡è¦ï¼Œæ•è·æ½œåœ¨é”™è¯¯
    "SIM",  # simplify - æ¨èï¼Œç®€åŒ–ä»£ç 
    "RUF",  # ruff - æ¨èï¼Œå…¶è‡ªå®šä¹‰è§„åˆ™éå¸¸é«˜æ•ˆ
    "UP",   # pyupgrade - æ¨èï¼Œä¿æŒä»£ç ç°ä»£æ€§
    "I",    # isort - æ¨èï¼Œç®¡ç†å¯¼å…¥é¡ºåº
    # ä»¥ä¸‹ä¸ºæ‰©å±•æ’ä»¶
    "C90",  # mccabe - æ¨èï¼Œæ§åˆ¶å¤æ‚åº¦
    "N",    # pep8-naming - æ¨èï¼Œå‘½åè§„èŒƒ
    "A",    # flake8-annotations - æ¨èï¼Œç±»å‹æ³¨è§£
    "S",    # bandit - å®‰å…¨ç›¸å…³ï¼Œé‡è¦
    "T",    # flake8-print - æ‰“å°è¯­å¥æ£€æŸ¥
    "Q",    # flake8-quotes - å­—ç¬¦ä¸²å¼•å·é£æ ¼
    "YTT",  # flake8-yapf - yapfæ ¼å¼åŒ–æ£€æŸ¥
    "F",    # pyflakes - åŸºç¡€é”™è¯¯æ£€æŸ¥
    "E",    # pycodestyle - åŸºç¡€é£æ ¼æ£€æŸ¥
    "RET",  # flake8-return - æ¨èï¼Œæ£€æŸ¥è¿”å›è¯­å¥
]
ignore = [
    "E501",  # è¡Œè¶…é•¿ - ç”±äºå·²å¢åŠ  line-lengthï¼Œå¯å¿½ç•¥
    "B006",  # å¯å˜é»˜è®¤å€¼
    "RUF001",  # æ¨¡ç³ŠUnicodeå­—ç¬¦é”™è¯¯
    "RUF002",  # æ¨¡ç³ŠUnicodeå­—ç¬¦æ–‡æ¡£å­—ç¬¦ä¸²é”™è¯¯
    "RUF003",  # æ¨¡ç³Š
    # "A003",  # å¿½ç•¥ 'ç±»å±æ€§è¦†ç›–å†…ç½®å‡½æ•°' çš„è­¦å‘Šï¼ˆæœ‰æ—¶æ˜¯åˆç†çš„ï¼‰
    # "C901",  # å¿½ç•¥ç‰¹å®šå‡½æ•°çš„ 'è¿‡äºå¤æ‚' è­¦å‘Šï¼ˆæœ‰æ—¶å¤æ‚æ˜¯å¿…è¦çš„ï¼‰
    # "C408",  # ä¸å¿…è¦çš„é›†åˆè°ƒç”¨
    # "F401" ,  # æœªä½¿ç”¨å¯¼å…¥
]
fixable = ["ALL"]  # é»˜è®¤å€¼æ˜¯"ALL"
unfixable = []  # ä¸å¯è‡ªåŠ¨ä¿®å¤çš„é”™è¯¯

#========================
#ğŸ§ªæ¯æ–‡ä»¶ç‰¹æ®Šè§„åˆ™
#========================
[lint.per-file-ignores]
"__init__.py" = ["F401"]  # åˆå§‹åŒ–æ–‡ä»¶å¿½ç•¥æœªä½¿ç”¨å¯¼å…¥
"test/**" = ["S101"]      # å¿½ç•¥æ–­è¨€è­¦å‘Š: assert
"tests/**" = ["S101"]     # åŒä¸Š
"legacy/**" = ["ALL"]     # å®Œå…¨å¿½ç•¥æ—§ä»£ç ç›®å½•

#========================
#ğŸ“¦å¯¼å…¥å¤„ç†é…ç½®
#========================
[lint.isort]
known-first-party = ["myapp"]
known-third-party = ["requests", "numpy", "pandas"]
required-imports = ["from __future__ import annotations"]

#========================
#ğŸ”¤ä»£ç é£æ ¼é…ç½®
#========================
[lint.flake8-quotes]
inline-quotes = "single"    # å†…è”å­—ç¬¦ä¸²å¼ºåˆ¶å•å¼•å·
multiline-quotes = "double"  # å…è®¸å¤šè¡Œå­—ç¬¦ä¸²ç”¨åŒå¼•å· 
docstring-quotes = "double" # æ–‡æ¡£å­—ç¬¦ä¸²ä»ç”¨åŒå¼•å·ï¼ˆPEP 257ï¼‰
avoid-escape = true          # é¿å…ä¸å¿…è¦çš„è½¬ä¹‰ 

[lint.pydocstyle]
convention = "google"  # Googleé£æ ¼æ–‡æ¡£å­—ç¬¦ä¸²

#========================
#ğŸ§°å…¶ä»–æ£€æŸ¥è§„åˆ™
#========================
[lint.flake8-bugbear]
extend-immutable-calls = ["myapp.utils.freeze"]  # æ‰©å±•ä¸å¯å˜è°ƒç”¨ï¼Œå…è®¸å†»ç»“å­—å…¸

[lint.flake8-comprehensions]
allow-dict-calls-with-keyword-arguments = true  # å…è®¸å­—å…¸è°ƒç”¨æ—¶ä½¿ç”¨å…³é”®å­—å‚æ•°

[lint.flake8-tidy-imports]
ban-relative-imports = "all"  # ç¦æ­¢ç›¸å¯¹å¯¼å…¥

#========================
#âœ¨æ ¼å¼åŒ–é…ç½®(format) - ä¼˜åŒ–é‡ç‚¹
#========================
[format]
quote-style = "single"  # ç¡®ä¿æ ¼å¼åŒ–å™¨ä¹Ÿä½¿ç”¨å•å¼•å·
docstring-code-format = true  # å…è®¸æ ¼å¼åŒ–æ–‡æ¡£å­—ç¬¦ä¸²å†…çš„ä»£ç 

#æ›´å¤šé…ç½®å¯ä»¥å‚è€ƒRuffå®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.astral.sh/ruff/